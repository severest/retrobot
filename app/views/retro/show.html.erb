<div id="retroBoard"></div>

<script>


// var addPlusToBoard = function (data, show) {
//   var html = $('<div/>').addClass('item').html(plusTemplate(data));
//   $('#retroBoard').prepend(html);
//   if (!show) html.addClass('hide');
// };
// var addDeltaToBoard = function (data, show) {
//   var html = $('<div/>').addClass('item').html(deltaTemplate(data));
//   $('#retroBoard').append(html);
//   if (!show) html.addClass('hide');
//   html.find('.upvote').click(sendDeltaUpVote);
//   html.find('.downvote').click(sendDeltaDownVote);
// };

// WS.connectToRetro('<%= @retro.key %>', function (data) {
//   if (data.type === 'plus') {
//     addPlusToBoard(data, (data.userId === myID || $('.timer:visible').length === 0));
//   }
//   if (data.type === 'delta') {
//     addDeltaToBoard(data, (data.userId === myID || $('.timer:visible').length === 0));
//   }
//   if (data.type === 'time') {
//     $('.start-timer').addClass('hide')
//     $('.timer').removeClass('hide');
//     updateClock(data.minutes, data.seconds, data.clock);
//     if (data.minutes === 0 && data.seconds === 0) {
//         $('.item').removeClass('hide');
//     }
//   }
//
//   if (data.type === 'upvote' || data.type === 'downvote') {
//     $('.' + data.itemType + '-' + data.itemId + '.votes').html(data.votes);
//   }
// });

App.retroKey = '<%= @retro.key %>';
App.cards = [
  <% @retro.pluses.each do |plus| %>
    {type: 'plus', content: '<%= plus.content %>', id: <%= plus.id %>},
  <% end %>
  <% @retro.deltas.each do |delta| %>
    {type: 'delta', content: '<%= delta.content %>', votes: <%= delta.votes %>, id: <%= delta.id %>},
  <% end %>
];
// _.forEach(cards, function (card) {
//   if (card.type === 'plus') {
//     addPlusToBoard(card, true);
//   }
//   if (card.type === 'delta') {
//     addDeltaToBoard(card, true);
//   }
// });


</script>
